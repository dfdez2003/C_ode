<!-- frontend/src/app/pages/exercises/types/study/study.html -->

<div class="study-exercise-container">
  <!-- Header con tÃ­tulo y puntos -->
  <div class="exercise-header">
    <h2 class="exercise-title">{{ exerciseTitle }}</h2>
    <span class="exercise-points">{{ exercisePoints }} puntos</span>
  </div>

  <!-- Instrucciones -->
  <p class="instructions">
    ğŸ´ Revisa las tarjetas. Haz clic para voltearlas y ver la definiciÃ³n.
  </p>

  <!-- Barra de progreso -->
  <div class="progress-container">
    <div class="progress-bar">
      <div class="progress-fill" [style.width.%]="progress()"></div>
    </div>
    <span class="progress-text">
      {{ cardsViewed().size }} / {{ flashcardsArray().length }} tarjetas vistas
    </span>
  </div>

  <!-- Flashcard -->
  <div class="flashcard-wrapper">
    <div 
      class="flashcard" 
      [class.flipped]="isFlipped()"
      (click)="flipCard()">
      
      <!-- Cara frontal (concepto) -->
      <div class="flashcard-front">
        <div class="card-label">Concepto</div>
        <div class="card-content">
          {{ currentCard().concept }}
        </div>
        <div class="card-hint">ğŸ‘† Haz clic para ver la definiciÃ³n</div>
      </div>

      <!-- Cara trasera (definiciÃ³n) -->
      <div class="flashcard-back">
        <div class="card-label">DefiniciÃ³n</div>
        <div class="card-content">
          {{ currentCard().definition }}
        </div>
        <div class="card-hint">âœ… Â¡Ahora lo sabes!</div>
      </div>
    </div>
  </div>

  <!-- Contador de card actual -->
  <div class="card-counter">
    Tarjeta {{ currentCardIndex() + 1 }} de {{ flashcardsArray().length }}
  </div>

  <!-- Controles de navegaciÃ³n -->
  <div class="navigation-controls">
    <button 
      class="btn btn-secondary"
      (click)="previousCard()"
      [disabled]="currentCardIndex() === 0">
      â† Anterior
    </button>

    <button 
      class="btn btn-primary"
      (click)="nextCard()"
      [disabled]="isLastCard()">
      Siguiente â†’
    </button>
  </div>

  <!-- BotÃ³n de continuar (aparece cuando todas las cartas estÃ¡n vistas) -->
  @if (allCardsViewed()) {
    <div class="continue-section">
      <div class="completion-message">
        âœ… Â¡Has revisado todas las tarjetas!
      </div>
      <button 
        class="btn btn-continue"
        [disabled]="!sessionId"
        (click)="completeExercise()">
        {{ sessionId ? 'Continuar â†’' : 'â³ Iniciando sesiÃ³n...' }}
      </button>
    </div>
  }
</div>
