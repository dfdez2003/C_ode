<!-- frontend/src/app/pages/exercises/types/complete/complete.component.html -->

<div class="complete-exercise-container">
  <!-- Header del ejercicio -->
  <div class="exercise-header">
    <div class="exercise-info">
      <h2 class="exercise-title">{{ exerciseTitle }}</h2>
      <span class="exercise-points">
        <i class="points-icon">⭐</i>
        {{ exercisePoints }} puntos
      </span>
    </div>
  </div>

  <!-- Instrucciones -->
  <div class="instructions">
    <p>Completa el espacio en blanco seleccionando la opción correcta:</p>
  </div>

  <!-- Texto con el espacio en blanco -->
  <div class="text-content" [innerHTML]="displayText()"></div>

  <!-- Opciones de respuesta -->
  <div class="options-container">
    <button
      *ngFor="let option of exerciseData.options"
      class="option-button"
      [class.selected]="selectedAnswer() === option && !hasSubmitted()"
      [class.correct]="hasSubmitted() && option === exerciseData.correct_answer"
      [class.incorrect]="hasSubmitted() && selectedAnswer() === option && !isCorrect()"
      [class.disabled]="hasSubmitted()"
      [disabled]="hasSubmitted()"
      (click)="selectAnswer(option)"
    >
      {{ option }}
    </button>
  </div>

  <!-- Feedback -->
  <div class="feedback-container" *ngIf="showFeedback()">
    <div class="feedback" [class.correct]="isCorrect()" [class.incorrect]="!isCorrect()">
      <div class="feedback-icon">
        {{ isCorrect() ? '✓' : '✗' }}
      </div>
      <div class="feedback-message">
        <strong>{{ isCorrect() ? '¡Correcto!' : 'Incorrecto' }}</strong>
        <p *ngIf="isCorrect()">
          ¡Excelente! Haz clic en Continuar para avanzar.
        </p>
        <p *ngIf="!isCorrect()">
          Tu respuesta ha sido registrada. Haz clic en Continuar.
        </p>
      </div>
    </div>
  </div>

  <!-- Botones de acción -->
  <div class="action-buttons">
    @if (!hasSubmitted()) {
      <button
        class="btn-submit"
        [disabled]="!selectedAnswer()"
        (click)="checkAnswer()">
        Verificar Respuesta
      </button>
    }

    @if (hasSubmitted()) {
      <button
        class="btn-continue"
        (click)="continueToNext()">
        Continuar →
      </button>
    }
  </div>
</div>